@using Online_Food_Ordering_System.View_Models
@using Online_Food_Ordering_System.Views
@model List<CartItemVeiwModel>

@{
    ViewData["Title"] = "Cart Page";
}

<link rel="stylesheet" href="~/css/CartItemPartial.css" asp-append-version="true" />


<style>

    .product-container {
        width: 100%;
        height: 430px;
        display: flex;
        flex-wrap: nowrap;
        flex-direction: column;
        overflow: auto;
        align-items: center;
    }

    .home-container {
        margin: 50px;
        margin-top: 30px;
    }

</style>

<div class="home-container">

    <div class="product-container" id="productContainer">
        @{
           decimal TotalPrice = 0m;
        }

        @foreach (CartItemVeiwModel item in Model)
        {

            <partial name="CartItemPartial" model="item" />
            TotalPrice += item.Quntity * item.Price;
        }
    </div>

    <footer class="checkout-container">
        
        <h1 class="total-price-header">Total Price</h1>
        <h1 class="total-price">@TotalPrice$</h1>

        
        
        
        <a asp-area="" asp-controller="Checkout" asp-action="Checkout" style="width: 100%;display: flex; justify-content: center;">
        <button type="submit" class="checkout-button">Checkout</button>
        </a>

    </footer>
</div>


@section Scripts {
    <script>
        function UpdateQuntity(e) {
            let submitButton = document.getElementById("quntityButton");
            if (e.value > 1) {

                e.parentElement.submit();
            } else { 
                e.value = 1;
            }
        }


    </script>
}
